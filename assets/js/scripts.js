jQuery(document).ready(function($) {
	$("#menu").accordion();
	$(".colors a").click(function() {
		if ($(this).attr("class") != "default") {
			$("#menu").removeClass();
			$("#menu").addClass("menu").addClass($(this).attr("class"));
		} else {
			$("#menu").removeClass();
			$("#menu").addClass("menu");
		}
	});
});

/* accordion menu plugin*/
;(function($, window, document, undefined) {
	var pluginName = "accordion";
	var defaults = {
		speed: 200,
		showDelay: 0,
		hideDelay: 0,
		singleOpen: true,
		clickEffect: true,
		indicator: 'submenu-indicator-minus',
		subMenu: 'submenu',
		event: 'click touchstart' // click, touchstart
	};

	function Plugin(element, options) {
		this.element = element;
		this.settings = $.extend({}, defaults, options);
		this._defaults = defaults;
		this._name = pluginName;
		this.init();
	}
	$.extend(Plugin.prototype, {
		init: function() {
			this.openSubmenu();
			this.submenuIndicators();
			if (defaults.clickEffect) {
				this.addClickEffect();
			}
		},
		openSubmenu: function() {
			$(this.element).children("ul").find("li").bind(defaults.event, function(e) {
				e.preventDefault();
				e.stopPropagation();
				var $subMenus = $(this).children("." + defaults.subMenu);
				var $allSubMenus = $(this).find("." + defaults.subMenu);
				if ($subMenus.length > 0) {
					if ($subMenus.css("display") == "none") {
						$subMenus.slideDown(defaults.speed).siblings("a").addClass(defaults.indicator);
						if (defaults.singleOpen) {
							$(this).siblings().find("." + defaults.subMenu).slideUp(defaults.speed)
								.end().find("a").removeClass(defaults.indicator);
						}
						return false;
					} else {
						$(this).find("." + defaults.subMenu).delay(defaults.hideDelay).slideUp(defaults.speed);
					}
					if ($allSubMenus.siblings("a").hasClass(defaults.indicator)) {
						$allSubMenus.siblings("a").removeClass(defaults.indicator);
					}
				}
				window.location.href = $(this).children("a").attr("href");
			});
		},
		submenuIndicators: function() {
			if ($(this.element).find("." + defaults.subMenu).length > 0) {
				$(this.element).find("." + defaults.subMenu).siblings("a").append("<span class='submenu-indicator'>+</span>");
			}
		},
		addClickEffect: function() {
			var ink, d, x, y;
			$(this.element).find("a").bind("click touchstart", function(e) {
				$(".ink").remove();
				if ($(this).children(".ink").length === 0) {
					$(this).prepend("<span class='ink'></span>");
				}
				ink = $(this).find(".ink");
				ink.removeClass("animate-ink");
				if (!ink.height() && !ink.width()) {
					d = Math.max($(this).outerWidth(), $(this).outerHeight());
					ink.css({
						height: d,
						width: d
					});
				}
				x = e.pageX - $(this).offset().left - ink.width() / 2;
				y = e.pageY - $(this).offset().top - ink.height() / 2;
				ink.css({
					top: y + 'px',
					left: x + 'px'
				}).addClass("animate-ink");
			});
		}
	});
	$.fn[pluginName] = function(options) {
		this.each(function() {
			if (!$.data(this, "plugin_" + pluginName)) {
				$.data(this, "plugin_" + pluginName, new Plugin(this, options));
			}
		});
		return this;
	};
})(jQuery, window, document);


!function(){"use strict";if(navigator.userAgent.match(/IEMobile\/10\.0/)){var t=document.createElement("style");t.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.querySelector("head").appendChild(t)}}(),function(t){t.fn.ellipsis=function(t){var e=!0,i=t.openTip;"undefined"==typeof i||i||(e=!1);var n=t.maxLength;this.each(function(){var t=this.innerText;if(t.length>n){e&&(this.title=t),t=t.substr(0,n);var i=t.charAt(t.length-1);" "==i&&(t+="..."),this.innerText=t+"..."}})}}(jQuery),function(t){t.fn.ripple=function(e,i){var n,a,s,o,r,l,c,h=20,d="ontouchstart"in window||"onmsgesturechange"in window,f=(d?"touchstart":"mousedown")+".ripple",p=(d?"touchmove":"mousemove")+".ripple",u=function(t){return d&&(t=t.originalEvent.touches[0]),[t.pageX,t.pageY]};if(this.off(".ripple").data("unbound",!0),e&&e.unbind)return this;this.addClass("legitRipple").removeData("unbound").on(f,function(e){a=t(this),m(u(e))}).on("dragstart.ripple",function(t){n.allowDragging||t.preventDefault()}),t(document).on(p,function(t){a&&!a.data("unbound")&&g(u(t))}).on("mouseup.ripple touchend.ripple",function(t){!a||1!=t.which&&!d||a.data("unbound")||v()}),t(window).on("scroll.ripple",function(){a&&!a.data("unbound")&&v()});var m=function(e){n={},c=0,s=[a.outerWidth(),a.outerHeight()],$(),l=e,r=t("<span/>"),n.hasCustomRipple&&a.clone().children(".legitRipple-custom").last().removeClass("legitRipple-custom").appendTo(r),r.addClass("legitRipple-ripple").appendTo(a),w(e,!1),o=r.css("transition");var i=r.css("transition-duration").split(",");r.css("transition-duration",[7*parseFloat(i)+"s"].concat(i.slice(1)).join(",")).css("width",n.maxDiameter)},g=function(t){var e;if(c++,"proportional"==n.scaleMode){var i=Math.pow(c,c/100*5);e=i>40?40:i}else if("fixed"==n.scaleMode&&Math.abs(t[1]-l[1])>6)return void v();w(t,e)},v=function(){r.css("transition","all 0s linear 0s").css("width",r.css("width")).css("transition",o),setTimeout(function(){r.css("width",n.maxDiameter).css("opacity","0")},h),r.on("transitionend webkitTransitionEnd oTransitionEnd",function(){t(this).data("firstTransitionEnded")?t(this).off().remove():t(this).data("firstTransitionEnded",!0)}),a=null},$=function(){var i={dragging:!0,adaptPos:function(){return n.dragging},maxDiameter:function(){return Math.sqrt(Math.pow(s[0],2)+Math.pow(s[1],2))/a.outerWidth()*(n.adaptPos?100:200)+1+"%"},scaleMode:"fixed",hasCustomRipple:!1,allowDragging:!1};e=e||{},t.each(i,function(t,i){n[t]=e.hasOwnProperty(t)?e[t]:"function"==typeof i?i():i})},w=function(e,o){var l=[],h=[(e[0]-a.offset().left)/s[0],(e[1]-a.offset().top)/s[1]],d=[.5-h[0],.5-h[1]],f=[100/parseFloat(n.maxDiameter),100/parseFloat(n.maxDiameter)*(s[1]/s[0])],p=[d[0]*f[0],d[1]*f[1]],u=n.dragging||0===c;if(u&&"inline"==a.css("display")){var m=t("<span/>").text("Hi!").css("font-size",0).prependTo(a),g=m.offset().left;m.remove(),l=[e[0]-g+"px",e[1]-a.offset().top+"px"]}u&&(l=[l[0]||100*h[0]+"%",l[1]||100*h[1]+"%"],r.css("left",l[0]).css("top",l[1])),r.css("transform","translate3d(-50%, -50%, 0)"+(n.adaptPos?"translate3d("+100*p[0]+"%, "+100*p[1]+"%, 0)":"")+(o?"scale("+o+")":"")),i&&i(a,r,h,parseFloat(n.maxDiameter)/100)};return this},t.ripple=function(e){t.each(e,function(e,i){t(e).ripple(i[0]||i,i[1])})},t.ripple.destroy=function(){t(".legitRipple").removeClass("legitRipple").add(window).add(document).off(".ripple"),t(".legitRipple-ripple").remove(),$active=null}}(jQuery),function(t){"use strict";t.fn.fitVids=function(e){var i={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var n=document.head||document.getElementsByTagName("head")[0],a=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}",s=document.createElement("div");s.innerHTML='<p>x</p><style id="fit-vids-style">'+a+"</style>",n.appendChild(s.childNodes[1])}return e&&t.extend(i,e),this.each(function(){var e=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];i.customSelector&&e.push(i.customSelector);var n=".fitvidsignore";i.ignore&&(n=n+", "+i.ignore);var a=t(this).find(e.join(","));a=a.not("object object"),a=a.not(n),a.each(function(e){var i=t(this);if(!(i.parents(n).length>0||"embed"===this.tagName.toLowerCase()&&i.parent("object").length||i.parent(".fluid-width-video-wrapper").length)){i.css("height")||i.css("width")||!isNaN(i.attr("height"))&&!isNaN(i.attr("width"))||(i.attr("height",9),i.attr("width",16));var a="object"===this.tagName.toLowerCase()||i.attr("height")&&!isNaN(parseInt(i.attr("height"),10))?parseInt(i.attr("height"),10):i.height(),s=isNaN(parseInt(i.attr("width"),10))?i.width():parseInt(i.attr("width"),10),o=a/s;if(!i.attr("id")){var r="fitvid"+e;i.attr("id",r)}i.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*o+"%"),i.removeAttr("height").removeAttr("width")}})})}}(window.jQuery||window.Zepto),$(function(){$.fn.bootstrapExtraModal=function(t){var e=$.extend({backdrop:"static",keyboard:!1,reload:!1,position:"default",css:"",openAnimation:"jelly",closeAnimation:"unjelly",pushContent:!1},t),i=$(this),n=i.find(".modal-dialog"),a=null,s=function(t){!e.pushContent||"left"!==e.position&&"right"!==e.position||$(".push-content").addClass(t)},o=function(){$('[data-dismiss="modal"]').click(function(t){t.preventDefault(),t.stopPropagation(),r.hide()})},r={show:function(){switch(i.removeClass(e.closeAnimation),i.modal(e),i.css("display","block"),i.addClass(e.css+" bs-extra-modal"),e.position){case"right":e.openAnimation="slide-right",e.closeAnimation="unslide-right",e.css="modal-right",i.addClass(e.css+" "+e.openAnimation),s("push-right");break;case"left":e.openAnimation="slide-left",e.closeAnimation="unslide-left",e.css="modal-left",i.addClass(e.css+" "+e.openAnimation),s("push-left");break;default:i.addClass(e.openAnimation)}return a=$(".modal-backdrop"),a.click(function(){r.hide()}),o(),i},hide:function(){i.removeClass(e.closeAnimation),i.removeClass(e.openAnimation),i.addClass(e.closeAnimation),a=$(".modal-backdrop"),a.addClass("fade-out"),a.removeClass("in"),e.pushContent&&"right"===e.position?s("unpush-right"):e.pushContent&&"left"===e.position&&s("unpush-left"),setTimeout(function(){i.modal("hide"),i.removeClass(e.css),i.removeClass(e.closeAnimation),e.closeAnimation="",e.position="",e.pushContent&&$(".push-content").removeClass("push-right unpush-right push-left unpush-left"),e.reload&&location.reload(),r.content()},300)},content:function(t){return t?(n.html(t),this):void 0}};return $(document).keyup(function(t){27==t.keyCode&&r.hide()}),i.click(function(t){0===$(t.target).closest(".modal-dialog").length&&e.backdrop&&(t.preventDefault(),t.stopPropagation(),r.hide())}),r};var t=$("[data-em-selector]");t.each(function(){var t=$(this).data();$(this).click(function(){$(t.emSelector).bootstrapExtraModal({position:t.emPosition,pushContent:t.emPushContent}).show()})})}),$("document").ready(function(){var t=[],e=0;$("[data-box]").each(function(){if(t[e]=[],n=$(this).children("[data-center], [data-hcenter], [data-vcenter], [data-mhcenter], [data-mvcenter]").length,child=$(this).children().length,j=0,k=0,x=0,t[e][j++]=$(this).children("[data-center]").length,t[e][j++]=$(this).children("[data-hcenter]").length,t[e][j++]=$(this).children("[data-vcenter]").length,t[e][j++]=$(this).children("[data-mhcenter]").length,t[e][j++]=$(this).children("[data-mvcenter]").length,0!=t[e][x++]&&k++,0!=t[e][x++]&&k++,0!=t[e][x++]&&k++,0!=t[e][x++]&&k++,0!=t[e][x++]&&k++,n!=child)throw new Error("data-box inside can't set element without center.js data element (data-center, data-vcenter, data-hcenter, data-mvcenter, data-mhcenter) ");if($(this).children("[data-center]").length>1)throw new Error("Can't use multiple data-center in one data-box. Use data-mhcenter or data-mvcenter as your requirement");if($(this).children("[data-vcenter]").length>1)throw new Error("Can't use multiple data-vcenter in one data-box. Use data-mhcenter or data-mvcenter as your requirement");if($(this).children("[data-hcenter]").length>1)throw new Error("Can't use multiple data-hcenter in one data-box. Use data-mhcenter or data-mvcenter as your requirement");if(1!=k)throw new Error("Can't use two or more type center.js data element in one data-box");e++});var i=[],a=[];e=0,j=0,$("[data-box]").each(function(){i[e++]=$(this).width(),a[j++]=$(this).height()});var s=[],o=[];x=0,$("[data-box]").each(function(){s[x]=[],o[x]=[];var t=0;$(this).children("[data-center], [data-hcenter], [data-vcenter], [data-mhcenter], [data-mvcenter]").each(function(){s[x][t]=$(this).outerHeight(),o[x][t]=$(this).outerWidth(),t++}),x++}),t=0,$("[data-box]").each(function(){for(var e=0;e<$(this).children("[data-center]").length;e++)$(this).children("[data-center]").each(function(){$(this).css("margin-top",(a[t]-s[t][e])/2),$(this).css("margin-left",(i[t]-o[t][e])/2)});t++}),t=0,$("[data-box]").each(function(){var e=0;n=$(this).children("[data-mhcenter]").length,$(this).children("[data-mhcenter]").each(function(){s[t][n]=0;for(var r=0;r<n;r++)s[t][n]=s[t][r]+s[t][n];$(this).css("margin-top",(a[t]-s[t][n])/(n+1)),$(this).css("margin-left",(i[t]-o[t][e])/2),e++}),t++}),t=0,$("[data-box]").each(function(){var e=0;n=$(this).children("[data-mvcenter]").length,$(this).children("[data-mvcenter]").each(function(){o[t][n]=0;for(var r=0;r<n;r++)o[t][n]=o[t][r]+o[t][n];0==e?$(this).css("margin-left",(i[t]-o[t][n])/(n+1)):$(this).css("margin-left",(i[t]-o[t][n])/(n+1)-5),$(this).css("margin-top",(a[t]-s[t][e])/2),$(this).css("display","inline-block"),$(this).css("vertical-align","top"),e++}),t++}),t=0,$("[data-box]").each(function(){for(var e=0;e<$(this).children("[data-vcenter]").length;e++)$(this).children("[data-vcenter]").each(function(){$(this).css("margin-top",(a[t]-s[t][e])/2)});t++}),t=0,$("[data-box]").each(function(){for(var e=0;e<$(this).children("[data-hcenter]").length;e++)$(this).children("[data-hcenter]").each(function(){$(this).css("margin-left",(i[t]-o[t][e])/2)});t++}),$(window).resize(function(){var t=[],e=0;$("[data-box]").each(function(){if(t[e]=[],n=$(this).children("[data-center], [data-hcenter], [data-vcenter], [data-mhcenter], [data-mvcenter]").length,child=$(this).children().length,j=0,k=0,x=0,t[e][j++]=$(this).children("[data-center]").length,t[e][j++]=$(this).children("[data-hcenter]").length,t[e][j++]=$(this).children("[data-vcenter]").length,t[e][j++]=$(this).children("[data-mhcenter]").length,t[e][j++]=$(this).children("[data-mvcenter]").length,0!=t[e][x++]&&k++,0!=t[e][x++]&&k++,0!=t[e][x++]&&k++,0!=t[e][x++]&&k++,0!=t[e][x++]&&k++,n!=child)throw new Error("data-box inside can't set element without center.js data element (data-center, data-vcenter, data-hcenter, data-mvcenter, data-mhcenter) ");if($(this).children("[data-center]").length>1)throw new Error("Can't use multiple data-center in one data-box. Use data-mhcenter or data-mvcenter as your requirement");if($(this).children("[data-vcenter]").length>1)throw new Error("Can't use multiple data-vcenter in one data-box. Use data-mhcenter or data-mvcenter as your requirement");if($(this).children("[data-hcenter]").length>1)throw new Error("Can't use multiple data-hcenter in one data-box. Use data-mhcenter or data-mvcenter as your requirement");if(1!=k)throw new Error("Can't use two or more type center.js data element in one data-box");e++});var i=[],a=[];e=0,j=0,$("[data-box]").each(function(){i[e++]=$(this).width(),a[j++]=$(this).height()});var s=[],o=[];x=0,$("[data-box]").each(function(){s[x]=[],o[x]=[];var t=0;$(this).children("[data-center], [data-hcenter], [data-vcenter], [data-mhcenter], [data-mvcenter]").each(function(){s[x][t]=$(this).outerHeight(),o[x][t]=$(this).outerWidth(),t++}),x++}),t=0,$("[data-box]").each(function(){for(var e=0;e<$(this).children("[data-center]").length;e++)$(this).children("[data-center]").each(function(){$(this).css("margin-top",(a[t]-s[t][e])/2),$(this).css("margin-left",(i[t]-o[t][e])/2)});t++}),t=0,$("[data-box]").each(function(){var e=0;n=$(this).children("[data-mhcenter]").length,$(this).children("[data-mhcenter]").each(function(){s[t][n]=0;for(var r=0;r<n;r++)s[t][n]=s[t][r]+s[t][n];$(this).css("margin-top",(a[t]-s[t][n])/(n+1)),$(this).css("margin-left",(i[t]-o[t][e])/2),e++}),t++}),t=0,$("[data-box]").each(function(){var e=0;n=$(this).children("[data-mvcenter]").length,$(this).children("[data-mvcenter]").each(function(){o[t][n]=0;for(var r=0;r<n;r++)o[t][n]=o[t][r]+o[t][n];0==e?$(this).css("margin-left",(i[t]-o[t][n])/(n+1)):$(this).css("margin-left",(i[t]-o[t][n])/(n+1)-5),$(this).css("margin-top",(a[t]-s[t][e])/2),$(this).css("display","inline-block"),$(this).css("vertical-align","top"),e++}),t++}),t=0,$("[data-box]").each(function(){for(var e=0;e<$(this).children("[data-vcenter]").length;e++)$(this).children("[data-vcenter]").each(function(){$(this).css("margin-top",(a[t]-s[t][e])/2)});t++}),t=0,$("[data-box]").each(function(){for(var e=0;e<$(this).children("[data-hcenter]").length;e++)$(this).children("[data-hcenter]").each(function(){$(this).css("margin-left",(i[t]-o[t][e])/2)});t++})})}),function(t,e,i,n){function a(e,i){this.element=e,this.options=t.extend({},o,i),this._defaults=o,this._name=s,this.init()}var s="stellar",o={scrollProperty:"scroll",positionProperty:"position",horizontalScrolling:!0,verticalScrolling:!0,horizontalOffset:0,verticalOffset:0,responsive:!1,parallaxBackgrounds:!0,parallaxElements:!0,hideDistantElements:!0,hideElement:function(t){t.hide()},showElement:function(t){t.show()}},r={scroll:{getLeft:function(t){return t.scrollLeft()},setLeft:function(t,e){t.scrollLeft(e)},getTop:function(t){return t.scrollTop()},setTop:function(t,e){t.scrollTop(e)}},position:{getLeft:function(t){return-1*parseInt(t.css("left"),10)},getTop:function(t){return-1*parseInt(t.css("top"),10)}},margin:{getLeft:function(t){return-1*parseInt(t.css("margin-left"),10)},getTop:function(t){return-1*parseInt(t.css("margin-top"),10)}},transform:{getLeft:function(t){var e=getComputedStyle(t[0])[h];return"none"!==e?-1*parseInt(e.match(/(-?[0-9]+)/g)[4],10):0},getTop:function(t){var e=getComputedStyle(t[0])[h];return"none"!==e?-1*parseInt(e.match(/(-?[0-9]+)/g)[5],10):0}}},l={position:{setLeft:function(t,e){t.css("left",e)},setTop:function(t,e){t.css("top",e)}},transform:{setPosition:function(t,e,i,n,a){t[0].style[h]="translate3d("+(e-i)+"px, "+(n-a)+"px, 0)"}}},c=function(){var e,i=/^(Moz|Webkit|Khtml|O|ms|Icab)(?=[A-Z])/,n=t("script")[0].style,a="";for(e in n)if(i.test(e)){a=e.match(i)[0];break}return"WebkitOpacity"in n&&(a="Webkit"),"KhtmlOpacity"in n&&(a="Khtml"),function(t){return a+(a.length>0?t.charAt(0).toUpperCase()+t.slice(1):t)}}(),h=c("transform"),d=t("<div />",{style:"background:#fff"}).css("background-position-x")!==n,f=d?function(t,e,i){t.css({"background-position-x":e,"background-position-y":i})}:function(t,e,i){t.css("background-position",e+" "+i)},p=d?function(t){return[t.css("background-position-x"),t.css("background-position-y")]}:function(t){return t.css("background-position").split(" ")},u=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};a.prototype={init:function(){this.options.name=s+"_"+Math.floor(1e9*Math.random()),this._defineElements(),this._defineGetters(),this._defineSetters(),this._handleWindowLoadAndResize(),this._detectViewport(),this.refresh({firstLoad:!0}),"scroll"===this.options.scrollProperty?this._handleScrollEvent():this._startAnimationLoop()},_defineElements:function(){this.element===i.body&&(this.element=e),this.$scrollElement=t(this.element),this.$element=this.element===e?t("body"):this.$scrollElement,this.$viewportElement=this.options.viewportElement!==n?t(this.options.viewportElement):this.$scrollElement[0]===e||"scroll"===this.options.scrollProperty?this.$scrollElement:this.$scrollElement.parent()},_defineGetters:function(){var t=this,e=r[t.options.scrollProperty];this._getScrollLeft=function(){return e.getLeft(t.$scrollElement)},this._getScrollTop=function(){return e.getTop(t.$scrollElement)}},_defineSetters:function(){var e=this,i=r[e.options.scrollProperty],n=l[e.options.positionProperty],a=i.setLeft,s=i.setTop;this._setScrollLeft="function"==typeof a?function(t){a(e.$scrollElement,t)}:t.noop,this._setScrollTop="function"==typeof s?function(t){s(e.$scrollElement,t)}:t.noop,this._setPosition=n.setPosition||function(t,i,a,s,o){e.options.horizontalScrolling&&n.setLeft(t,i,a),e.options.verticalScrolling&&n.setTop(t,s,o)}},_handleWindowLoadAndResize:function(){var i=this,n=t(e);i.options.responsive&&n.bind("load."+this.name,function(){i.refresh()}),n.bind("resize."+this.name,function(){i._detectViewport(),i.options.responsive&&i.refresh()})},refresh:function(i){var n=this,a=n._getScrollLeft(),s=n._getScrollTop();i&&i.firstLoad||this._reset(),this._setScrollLeft(0),this._setScrollTop(0),this._setOffsets(),this._findParticles(),this._findBackgrounds(),i&&i.firstLoad&&/WebKit/.test(navigator.userAgent)&&t(e).load(function(){var t=n._getScrollLeft(),e=n._getScrollTop();n._setScrollLeft(t+1),n._setScrollTop(e+1),n._setScrollLeft(t),n._setScrollTop(e)}),this._setScrollLeft(a),this._setScrollTop(s)},_detectViewport:function(){var t=this.$viewportElement.offset(),e=null!==t&&t!==n;this.viewportWidth=this.$viewportElement.width(),this.viewportHeight=this.$viewportElement.height(),this.viewportOffsetTop=e?t.top:0,this.viewportOffsetLeft=e?t.left:0},_findParticles:function(){{var e=this;this._getScrollLeft(),this._getScrollTop()}if(this.particles!==n)for(var i=this.particles.length-1;i>=0;i--)this.particles[i].$element.data("stellar-elementIsActive",n);this.particles=[],this.options.parallaxElements&&this.$element.find("[data-stellar-ratio]").each(function(){var i,a,s,o,r,l,c,h,d,f=t(this),p=0,u=0,m=0,g=0;if(f.data("stellar-elementIsActive")){if(f.data("stellar-elementIsActive")!==this)return}else f.data("stellar-elementIsActive",this);e.options.showElement(f),f.data("stellar-startingLeft")?(f.css("left",f.data("stellar-startingLeft")),f.css("top",f.data("stellar-startingTop"))):(f.data("stellar-startingLeft",f.css("left")),f.data("stellar-startingTop",f.css("top"))),s=f.position().left,o=f.position().top,r="auto"===f.css("margin-left")?0:parseInt(f.css("margin-left"),10),l="auto"===f.css("margin-top")?0:parseInt(f.css("margin-top"),10),h=f.offset().left-r,d=f.offset().top-l,f.parents().each(function(){var e=t(this);return e.data("stellar-offset-parent")===!0?(p=m,u=g,c=e,!1):(m+=e.position().left,void(g+=e.position().top))}),i=f.data("stellar-horizontal-offset")!==n?f.data("stellar-horizontal-offset"):c!==n&&c.data("stellar-horizontal-offset")!==n?c.data("stellar-horizontal-offset"):e.horizontalOffset,a=f.data("stellar-vertical-offset")!==n?f.data("stellar-vertical-offset"):c!==n&&c.data("stellar-vertical-offset")!==n?c.data("stellar-vertical-offset"):e.verticalOffset,e.particles.push({$element:f,$offsetParent:c,isFixed:"fixed"===f.css("position"),horizontalOffset:i,verticalOffset:a,startingPositionLeft:s,startingPositionTop:o,startingOffsetLeft:h,startingOffsetTop:d,parentOffsetLeft:p,parentOffsetTop:u,stellarRatio:f.data("stellar-ratio")!==n?f.data("stellar-ratio"):1,width:f.outerWidth(!0),height:f.outerHeight(!0),isHidden:!1})})},_findBackgrounds:function(){var e,i=this,a=this._getScrollLeft(),s=this._getScrollTop();this.backgrounds=[],this.options.parallaxBackgrounds&&(e=this.$element.find("[data-stellar-background-ratio]"),this.$element.data("stellar-background-ratio")&&(e=e.add(this.$element)),e.each(function(){var e,o,r,l,c,h,d,u=t(this),m=p(u),g=0,v=0,$=0,w=0;if(u.data("stellar-backgroundIsActive")){if(u.data("stellar-backgroundIsActive")!==this)return}else u.data("stellar-backgroundIsActive",this);u.data("stellar-backgroundStartingLeft")?f(u,u.data("stellar-backgroundStartingLeft"),u.data("stellar-backgroundStartingTop")):(u.data("stellar-backgroundStartingLeft",m[0]),u.data("stellar-backgroundStartingTop",m[1])),r="auto"===u.css("margin-left")?0:parseInt(u.css("margin-left"),10),l="auto"===u.css("margin-top")?0:parseInt(u.css("margin-top"),10),c=u.offset().left-r-a,h=u.offset().top-l-s,u.parents().each(function(){var e=t(this);return e.data("stellar-offset-parent")===!0?(g=$,v=w,d=e,!1):($+=e.position().left,void(w+=e.position().top))}),e=u.data("stellar-horizontal-offset")!==n?u.data("stellar-horizontal-offset"):d!==n&&d.data("stellar-horizontal-offset")!==n?d.data("stellar-horizontal-offset"):i.horizontalOffset,o=u.data("stellar-vertical-offset")!==n?u.data("stellar-vertical-offset"):d!==n&&d.data("stellar-vertical-offset")!==n?d.data("stellar-vertical-offset"):i.verticalOffset,i.backgrounds.push({$element:u,$offsetParent:d,isFixed:"fixed"===u.css("background-attachment"),horizontalOffset:e,verticalOffset:o,startingValueLeft:m[0],startingValueTop:m[1],startingBackgroundPositionLeft:isNaN(parseInt(m[0],10))?0:parseInt(m[0],10),startingBackgroundPositionTop:isNaN(parseInt(m[1],10))?0:parseInt(m[1],10),startingPositionLeft:u.position().left,startingPositionTop:u.position().top,startingOffsetLeft:c,startingOffsetTop:h,parentOffsetLeft:g,parentOffsetTop:v,stellarRatio:u.data("stellar-background-ratio")===n?1:u.data("stellar-background-ratio")})}))},_reset:function(){var t,e,i,n,a;for(a=this.particles.length-1;a>=0;a--)t=this.particles[a],e=t.$element.data("stellar-startingLeft"),i=t.$element.data("stellar-startingTop"),this._setPosition(t.$element,e,e,i,i),this.options.showElement(t.$element),t.$element.data("stellar-startingLeft",null).data("stellar-elementIsActive",null).data("stellar-backgroundIsActive",null);for(a=this.backgrounds.length-1;a>=0;a--)n=this.backgrounds[a],n.$element.data("stellar-backgroundStartingLeft",null).data("stellar-backgroundStartingTop",null),f(n.$element,n.startingValueLeft,n.startingValueTop)},destroy:function(){this._reset(),this.$scrollElement.unbind("resize."+this.name).unbind("scroll."+this.name),this._animationLoop=t.noop,t(e).unbind("load."+this.name).unbind("resize."+this.name)},_setOffsets:function(){var i=this,n=t(e);n.unbind("resize.horizontal-"+this.name).unbind("resize.vertical-"+this.name),"function"==typeof this.options.horizontalOffset?(this.horizontalOffset=this.options.horizontalOffset(),n.bind("resize.horizontal-"+this.name,function(){i.horizontalOffset=i.options.horizontalOffset()})):this.horizontalOffset=this.options.horizontalOffset,"function"==typeof this.options.verticalOffset?(this.verticalOffset=this.options.verticalOffset(),n.bind("resize.vertical-"+this.name,function(){i.verticalOffset=i.options.verticalOffset()})):this.verticalOffset=this.options.verticalOffset},_repositionElements:function(){var t,e,i,n,a,s,o,r,l,c,h=this._getScrollLeft(),d=this._getScrollTop(),p=!0,u=!0;if(this.currentScrollLeft!==h||this.currentScrollTop!==d||this.currentWidth!==this.viewportWidth||this.currentHeight!==this.viewportHeight){for(this.currentScrollLeft=h,this.currentScrollTop=d,this.currentWidth=this.viewportWidth,this.currentHeight=this.viewportHeight,c=this.particles.length-1;c>=0;c--)t=this.particles[c],e=t.isFixed?1:0,this.options.horizontalScrolling?(s=(h+t.horizontalOffset+this.viewportOffsetLeft+t.startingPositionLeft-t.startingOffsetLeft+t.parentOffsetLeft)*-(t.stellarRatio+e-1)+t.startingPositionLeft,r=s-t.startingPositionLeft+t.startingOffsetLeft):(s=t.startingPositionLeft,r=t.startingOffsetLeft),this.options.verticalScrolling?(o=(d+t.verticalOffset+this.viewportOffsetTop+t.startingPositionTop-t.startingOffsetTop+t.parentOffsetTop)*-(t.stellarRatio+e-1)+t.startingPositionTop,l=o-t.startingPositionTop+t.startingOffsetTop):(o=t.startingPositionTop,l=t.startingOffsetTop),this.options.hideDistantElements&&(u=!this.options.horizontalScrolling||r+t.width>(t.isFixed?0:h)&&r<(t.isFixed?0:h)+this.viewportWidth+this.viewportOffsetLeft,p=!this.options.verticalScrolling||l+t.height>(t.isFixed?0:d)&&l<(t.isFixed?0:d)+this.viewportHeight+this.viewportOffsetTop),u&&p?(t.isHidden&&(this.options.showElement(t.$element),t.isHidden=!1),this._setPosition(t.$element,s,t.startingPositionLeft,o,t.startingPositionTop)):t.isHidden||(this.options.hideElement(t.$element),t.isHidden=!0);for(c=this.backgrounds.length-1;c>=0;c--)i=this.backgrounds[c],e=i.isFixed?0:1,n=this.options.horizontalScrolling?(h+i.horizontalOffset-this.viewportOffsetLeft-i.startingOffsetLeft+i.parentOffsetLeft-i.startingBackgroundPositionLeft)*(e-i.stellarRatio)+"px":i.startingValueLeft,a=this.options.verticalScrolling?(d+i.verticalOffset-this.viewportOffsetTop-i.startingOffsetTop+i.parentOffsetTop-i.startingBackgroundPositionTop)*(e-i.stellarRatio)+"px":i.startingValueTop,f(i.$element,n,a)}},_handleScrollEvent:function(){var t=this,e=!1,i=function(){t._repositionElements(),e=!1},n=function(){e||(u(i),e=!0)};this.$scrollElement.bind("scroll."+this.name,n),n()},_startAnimationLoop:function(){var t=this;this._animationLoop=function(){u(t._animationLoop),t._repositionElements()},this._animationLoop()}},t.fn[s]=function(e){var i=arguments;return e===n||"object"==typeof e?this.each(function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new a(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?this.each(function(){var n=t.data(this,"plugin_"+s);n instanceof a&&"function"==typeof n[e]&&n[e].apply(n,Array.prototype.slice.call(i,1)),"destroy"===e&&t.data(this,"plugin_"+s,null)}):void 0},t[s]=function(){var i=t(e);return i.stellar.apply(i,Array.prototype.slice.call(arguments,0))},t[s].scrollProperty=r,t[s].positionProperty=l,e.Stellar=a}(jQuery,this,document);